<div class="mainDiv">
  <div class="row">
    <div class="col-12 d-flex justify-content-end">
      <button class="btn-dialog-close" mat-stroked-button (click)="onFormClose()" tabindex="-1"><mat-icon>clear</mat-icon></button>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <div class="content">
        <div class="row">
          <div class="col-lg-4 col-sm-12 col-xm-12">
            <div class="photoSection">
              <div class="row h-auto">
                <div class="mt-5 col-12 d-flex justify-content-center">
                  <div class="profilePhoto img-fluid">
                    <div class="mask">
                      <div class="delete" (click)="deleteProfileImage()">
                      </div>
                    </div>
                    <div class="edit" (click)="editProfilePhoto()">
                      <span class=""><mat-icon matSuffix>mode_edit</mat-icon></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-8 col-sm-12">
            <div class="row formSection">
              <div class="login-wrapper">
                <mat-card class="box">
                  <div class="row">
                    <div class="col-12 d-flex justify-content-center">
                      <h4>Student Registration</h4>
                    </div>
                  </div>
                  <form [formGroup]="studentService.form" class="example-form" style="font-size: 12px;" (ngSubmit)="submitForm()">
                    <mat-card-content>

                      <!--Registration Number field start here-->
                      <div class="row">
                        <div class="col-12">
                          <mat-form-field [style.width.%]=100>
                            <mat-label>Registration Number</mat-label>
                            <input matInput formControlName="regNo" required>
                            <mat-error *ngIf="studentService.registerFormControl.regNo.invalid">
                              {{studentService.registerFormControl.regNo.hasError('required')?'registration number is required':''}}
                            </mat-error>
                          </mat-form-field>
                        </div>
                      </div>
                      <!--Registration Number field end here-->

                      <!--Start Name fields here-->
                      <div class="row">
                        <div class="col-12 col-md-3">
                          <mat-form-field [style.width.%]=100>
                            <mat-label>Initials</mat-label>
                            <input matInput formControlName="initial">
                          </mat-form-field>
                        </div>

                        <div class="col-12 col-md-4">
                          <mat-form-field [style.width.%]=100>
                            <mat-label>First name</mat-label>
                            <input matInput formControlName="fname" required>
                            <mat-error *ngIf="studentService.registerFormControl.fname.invalid">
                              {{studentService.registerFormControl.fname.hasError('required') ? 'First name is required'
                                    : studentService.registerFormControl.fname.hasError('minlength')
                                            ? 'First name should have at least three characters': 'First name cannot contain any numbers or special characters'}}
                            </mat-error>
                          </mat-form-field>
                        </div>

                        <div class="col-12 col-md-5">
                          <mat-form-field [style.width.%]=100>
                            <mat-label>Last Name </mat-label>
                            <input matInput formControlName="lname">
                            <mat-error *ngIf="studentService.registerFormControl.lname.invalid">
                              {{studentService.registerFormControl.lname.hasError('minlength')? 'Last name should have at least three characters': ''}}
                            </mat-error>
                          </mat-form-field>
                        </div>

                      </div>
                      <!--End Name fields here-->

                      <!--Guardian Name field start here-->
                      <div class="row">
                        <div class="col-12">
                          <mat-form-field [style.width.%]=100>
                            <mat-label>Guardian Name</mat-label>
                            <input matInput placeholder="Ex.Your Parents name" formControlName="guardianName"required>
                            <mat-error *ngIf="studentService.registerFormControl.guardianName.invalid">
                              {{studentService.registerFormControl.guardianName.hasError('required')? 'guardian name is required'
                                    :studentService.registerFormControl.guardianName.hasError('minlength')? 'guardian name should have at least three characters':'guardian name cannot contain any numbers or special characters'}}
                            </mat-error>
                          </mat-form-field>
                        </div>
                      </div>
                      <!--Guardian Name field end here-->

                      <!--Address Fileds start here-->
                      <div class="row">
                        <div class="col-12 col-md-6">
                          <mat-form-field [style.width.%]=100>
                            <mat-label>Street Number</mat-label>
                            <input matInput placeholder="ex.No 01" formControlName="streetNo">
                          </mat-form-field>
                        </div>

                        <div class="col-12 col-md-6">
                          <mat-form-field [style.width.%]=100>
                            <mat-label>First Street</mat-label>
                            <input matInput placeholder="ex.1St lane" formControlName="firstStreet"required>
                            <mat-error *ngIf="studentService.registerFormControl.firstStreet.invalid">
                              {{studentService.registerFormControl.firstStreet.hasError('required')
                                    ? 'first street is required':studentService.registerFormControl.firstStreet.hasError('minlength')
                                            ? 'first street should have at least threee characters':''}}
                            </mat-error>
                          </mat-form-field>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-12 col-md-6">
                          <mat-form-field [style.width.%]=100>
                            <mat-label>Second Street</mat-label>
                            <input matInput placeholder="Ex.Kodagoda" formControlName="secondStreet"required>
                            <mat-error *ngIf="studentService.registerFormControl.secondStreet.invalid">
                              {{studentService.registerFormControl.secondStreet.hasError('required')
                                    ?'second street is required':studentService.registerFormControl.secondStreet.hasError('minlength')
                                            ?'second street should have at least threee characters':''}}
                            </mat-error>
                          </mat-form-field>
                        </div>

                        <div class="col-12 col-md-6">
                          <mat-form-field [style.width.%]=100>
                            <mat-label>Town</mat-label>
                            <input matInput placeholder="Ex.Imaduwa" formControlName="town">
                            <mat-error *ngIf="studentService.registerFormControl.town.invalid">
                              {{studentService.registerFormControl.town.hasError('minlength')?'town should have at least three characters':''}}
                            </mat-error>
                          </mat-form-field>
                        </div>
                      </div>
                      <!--Address Fileds end here-->

                      <!--Radio button field start here-->
                      <div class="row">
                        <div class="col-12">
                          <mat-radio-group aria-label="Select an option" formControlName="gender">
                            <mat-radio-button value="male" class="pr-lg-4 pr-4">Male</mat-radio-button>
                            <mat-radio-button value="female">Female</mat-radio-button>
                          </mat-radio-group>
                        </div>
                      </div>
                      <!--Radio button field end here-->

                      <!--Telephone field start here-->
                      <div class="row">
                        <div class="col-12">
                          <mat-form-field>
                            <mat-label>Telephone</mat-label>
                            <input type="tel" matInput placeholder="0771234567" formControlName="contact">
                            <mat-icon matSuffix>mode_edit</mat-icon>
                            <mat-error *ngIf="studentService.registerFormControl.contact.invalid">
                              {{studentService.registerFormControl.contact.hasError('minlength')?'contact number must be at least 10 numbers'
                                    : studentService.registerFormControl.contact.hasError('maxlength')?'contact number must be 10 numbers'
                                            :studentService.registerFormControl.contact.hasError('pattern')?'contact number can not contain any special characters':''}}
                            </mat-error>
                          </mat-form-field>
                        </div>
                      </div>
                      <!--Telephone field end here-->

                      <div class="row">
                        <div class="col-4">
                          <mat-form-field appearance="fill" [style.width.%]=100>
                            <mat-label>Year</mat-label>
                            <select (click)="test();" matNativeControl [(ngModel)]="selectedYear" name="year" formControlName="year">
                              <option *ngFor="let year of years" [ngValue]="year">
                                {{year}}
                              </option>
                            </select>
                          </mat-form-field>
                        </div>
                        <div class="col-4">
                          <mat-form-field appearance="fill"[style.width.%]=100>
                            <mat-label>Grade</mat-label>
                            <input matInput formControlName="grade">
                            <mat-error *ngIf="studentService.registerFormControl.grade.invalid">
                              {{studentService.registerFormControl.grade.hasError('required')?'grade is required':''}}
                            </mat-error>
                          </mat-form-field>
                        </div>
                        <div class="col-4">
                          <mat-form-field appearance="fill"[style.width.%]=100>
                            <mat-label>Section</mat-label>
                            <select (click)="getSection();" matNativeControl [(ngModel)]="selectedSection" name="section" formControlName="section">
                              <option *ngFor="let sect of sections" [ngValue]="sect">{{sect}}</option>
                            </select>
                          </mat-form-field>
                        </div>
                      </div>
                    </mat-card-content>
                    <div class="row">
                      <div class="col-12 d-flex justify-content-center">
                        <button mat-stroked-button class="btn-block btn-register button" [style.width.%]=50>Register</button>
                      </div>
                    </div>
                  </form>
                </mat-card>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
